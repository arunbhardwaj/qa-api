config:
  target: 'http://localhost:3000'
  phases:
    - duration: 30
      arrivalRate: 5
      rampTo: 30
      name: Warm up
    - duration: 30
      arrivalRate: 30
      rampTo: 100
      name: Ramp up to 100 req/s
    - duration: 60
      arrivalRate: 200
      rampTo: 500
      name: Ramp up to 500 req/s
    - duration: 60
      arrivalRate: 400
      rampTo: 450
      name: Ramp from 400 to 450 req/s
    - duration: 60
      arrivalRate: 450
      rampTo: 500
      name: Ramp from 450 to 500 req/s
  payload:
    path: './productTestIds.csv'
    fields:
      - "id"

scenarios:
  - name: "get all questions"
    flow:
      - get:
          url: "/qa/questions?product_id={{ id }}"
          capture:
            - json: "$.results"
      - think: 3 #pause 3 seconds
